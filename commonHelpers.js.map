{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-fuctions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"item-imagesList js-item-imagesList\">\n        <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" width = \"360\"/>\n             </a>\n            <div>\n                <span>\n                  <p><b>Likes</b></p>\n                  <p>${likes}</p>\n                </span>\n        \n                <span>\n                  <p><b>Views</b></p>\n                  <p>${views}</p>\n                </span>\n                <span>\n                  <p><b>Comments</b></p>\n                  <p>${comments}</p>\n                </span>\n                <span>\n                  <p><b>Downloads</b></p>\n                  <p>${downloads}</p>\n                </span>\n            </div>\n       \n      </li>`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { createMarkup } from './render-fuctions';\nimport { elements } from '../main';\nimport axios, { Axios } from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com';\nconst ENDPOINT = 'api';\nconst KEY = '44929551-fd3f3fb9d8ead760ff0c5783d';\n\nexport async function makeRequest({ q = '', page = 1, per_page = 15 } = {}) {\n  return axios\n    .get(`${ENDPOINT}`, {\n      params: {\n        key: KEY,\n        q,\n        page,\n        per_page,\n      },\n    })\n    .then(({ data }) => data);\n}\n\n// elements.loader.style.display = 'inline-block';\n\n// fetch(\n//   `https://pixabay.com/api/?key=${key}&q=${params}&image_type=photo&orientation=horizontal&safesearch=true`\n// )\n//   .then(res => {\n//     if (!res.ok) {\n//       throw new Error(res.status);\n//     }\n//     return res.json();\n//   })\n//   .then(({ hits }) => {\n//     elements.loader.style.display = 'none';\n//     if (hits.length === 0) {\n//       iziToast.error({\n//         title:\n//           'Sorry, there are no images matching your search query. Please try again!',\n//         position: 'topRight',\n//       });\n//       return;\n//     }\n//     elements.imagesList.insertAdjacentHTML('afterbegin', createMarkup(hits));\n\n//     const OpenGallery = new SimpleLightbox('.js-imagesList a', {\n//       captions: true,\n//       captionType: 'attr',\n//       captionsData: 'alt',\n//       captionPosition: 'bottom',\n//       captionDelay: 250,\n//     });\n\n//     OpenGallery.on('show.simplelightbox', evt => {\n//       evt.preventDefault();\n//     });\n//     OpenGallery.refresh();\n//   })\n//   .catch(err => console.error(err));\n","import { makeRequest } from './js/pixabay-api';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { createMarkup } from './js/render-fuctions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const elements = {\n  form: document.querySelector('.js-searchForm'),\n  serchInput: document.querySelector('.js-searchInput'),\n  searchBtn: document.querySelector('.js-searchBtn'),\n  imagesList: document.querySelector('.js-imagesList'),\n  loader: document.querySelector('.loader'),\n};\n\nconst params = {\n  q: '',\n  page: 1,\n  per_page: 15,\n  maxPage: 0,\n};\nelements.form.addEventListener('submit', handlerSubmit);\n\nasync function handlerSubmit(evt) {\n  evt.preventDefault();\n  elements.imagesList.innerHTML = '';\n  params.page = 1;\n\n  params.q = elements.serchInput.value.trim();\n\n  if (!params.q) {\n    iziToast.warning({\n      title: 'Поле запиту - пусте',\n      message: 'Заповніть поле',\n      position: 'topRight',\n    });\n    elements.form.reset();\n    return;\n  }\n\n  try {\n    const { total, hits } = await makeRequest(params);\n    const createItem = createMarkup(hits);\n\n    const imj = await makeRequest(params);\n    console.log(imj);\n    params.maxPage = Math.ceil(total / params.per_page);\n\n    elements.imagesList.insertAdjacentHTML('afterbegin', createItem);\n\n    const OpenGallery = new SimpleLightbox('.js-imagesList a', {\n      captions: true,\n      captionType: 'attr',\n      captionsData: 'alt',\n      captionPosition: 'bottom',\n      captionDelay: 250,\n    });\n\n    OpenGallery.on('show.simplelightbox', evt => {\n      evt.preventDefault();\n    });\n    OpenGallery.refresh();\n  } catch (err) {\n    iziToast.error({\n      title: 'Сталася помилка',\n      message: `${err}`,\n    });\n  } finally {\n    elements.form.reset();\n  }\n}\n"],"names":["createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","axios","ENDPOINT","KEY","makeRequest","q","page","per_page","data","elements","params","handlerSubmit","evt","iziToast","total","hits","createItem","imj","OpenGallery","SimpleLightbox","err"],"mappings":"owBAAO,SAASA,EAAaC,EAAK,CAChC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,mBACWL,CAAa;AAAA,wBACRD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,uBAK3BC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,uBAKLC,CAAK;AAAA;AAAA;AAAA;AAAA,uBAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,uBAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,YAK3B,EACA,KAAK,EAAE,CACZ,CCjCAC,EAAM,SAAS,QAAU,sBACzB,MAAMC,EAAW,MACXC,EAAM,qCAEL,eAAeC,EAAY,CAAE,EAAAC,EAAI,GAAI,KAAAC,EAAO,EAAG,SAAAC,EAAW,EAAI,EAAG,GAAI,CAC1E,OAAON,EACJ,IAAI,GAAGC,CAAQ,GAAI,CAClB,OAAQ,CACN,IAAKC,EACL,EAAAE,EACA,KAAAC,EACA,SAAAC,CACD,CACP,CAAK,EACA,KAAK,CAAC,CAAE,KAAAC,CAAM,IAAKA,CAAI,CAC5B,CCdO,MAAMC,EAAW,CACtB,KAAM,SAAS,cAAc,gBAAgB,EAC7C,WAAY,SAAS,cAAc,iBAAiB,EACpD,UAAW,SAAS,cAAc,eAAe,EACjD,WAAY,SAAS,cAAc,gBAAgB,EACnD,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEMC,EAAS,CACb,EAAG,GACH,KAAM,EACN,SAAU,GACV,QAAS,CACX,EACAD,EAAS,KAAK,iBAAiB,SAAUE,CAAa,EAEtD,eAAeA,EAAcC,EAAK,CAOhC,GANAA,EAAI,eAAc,EAClBH,EAAS,WAAW,UAAY,GAChCC,EAAO,KAAO,EAEdA,EAAO,EAAID,EAAS,WAAW,MAAM,KAAI,EAErC,CAACC,EAAO,EAAG,CACbG,EAAS,QAAQ,CACf,MAAO,sBACP,QAAS,iBACT,SAAU,UAChB,CAAK,EACDJ,EAAS,KAAK,QACd,MACD,CAED,GAAI,CACF,KAAM,CAAE,MAAAK,EAAO,KAAAC,CAAI,EAAK,MAAMX,EAAYM,CAAM,EAC1CM,EAAaxB,EAAauB,CAAI,EAE9BE,EAAM,MAAMb,EAAYM,CAAM,EACpC,QAAQ,IAAIO,CAAG,EACfP,EAAO,QAAU,KAAK,KAAKI,EAAQJ,EAAO,QAAQ,EAElDD,EAAS,WAAW,mBAAmB,aAAcO,CAAU,EAE/D,MAAME,EAAc,IAAIC,EAAe,mBAAoB,CACzD,SAAU,GACV,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,aAAc,GACpB,CAAK,EAEDD,EAAY,GAAG,sBAAuBN,GAAO,CAC3CA,EAAI,eAAc,CACxB,CAAK,EACDM,EAAY,QAAO,CACpB,OAAQE,EAAK,CACZP,EAAS,MAAM,CACb,MAAO,kBACP,QAAS,GAAGO,CAAG,EACrB,CAAK,CACL,QAAY,CACRX,EAAS,KAAK,OACf,CACH"}